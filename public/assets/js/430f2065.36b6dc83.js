"use strict";(self.webpackChunkgds_bootcamp=self.webpackChunkgds_bootcamp||[]).push([[1046],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),p=c(n),h=i,m=p["".concat(s,".").concat(h)]||p[h]||d[h]||o;return n?a.createElement(m,l(l({ref:t},u),{},{components:n})):a.createElement(m,l({ref:t},u))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,l=new Array(o);l[0]=p;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:i,l[1]=r;for(var c=2;c<o;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},3264:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var a=n(7462),i=(n(7294),n(3905));const o={},l="3.4 CI/CD Pipeline Enhancements",r={unversionedId:"ci-cd/CICD-Enhancements",id:"ci-cd/CICD-Enhancements",title:"3.4 CI/CD Pipeline Enhancements",description:"Introduction",source:"@site/docs/ci-cd/34-CICD-Enhancements.md",sourceDirName:"ci-cd",slug:"/ci-cd/CICD-Enhancements",permalink:"/docs/ci-cd/CICD-Enhancements",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ci-cd/34-CICD-Enhancements.md",tags:[],version:"current",sidebarPosition:34,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"3.3 Deploying the Backend with IaC",permalink:"/docs/ci-cd/Deploy-Backend-IaC"},next:{title:"3.5 Clean Up",permalink:"/docs/ci-cd/CleanUp"}},s={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Enhancing the CI/CD Pipeline",id:"enhancing-the-cicd-pipeline",level:2},{value:"Linting",id:"linting",level:3},{value:"Stretch Goal 1",id:"stretch-goal-1",level:4},{value:"Image Scanning",id:"image-scanning",level:3},{value:"Stretch Goal 2",id:"stretch-goal-2",level:4},{value:"Automated Dependency Updating",id:"automated-dependency-updating",level:3},{value:"Stretch Goal 3",id:"stretch-goal-3",level:4},{value:"Infrastructure-as-Code (IaC) Scanning",id:"infrastructure-as-code-iac-scanning",level:3},{value:"Stretch Goal 4",id:"stretch-goal-4",level:4},{value:"Further Stretch Goals",id:"further-stretch-goals",level:3}],u={toc:c};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"34-cicd-pipeline-enhancements"},"3.4 CI/CD Pipeline Enhancements"),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"This exercise is an ",(0,i.kt)("strong",{parentName:"p"},"optional")," stretch goal. If you are short on time, you may wish to work on this exercise after the workshop. Please proceed to the ",(0,i.kt)("a",{parentName:"p",href:"./CleanUp"},"next exercise")," to clean up your environment.")),(0,i.kt)("p",null,"In this exercise, we will be extending the CI/CD pipeline you created in the ",(0,i.kt)("a",{parentName:"p",href:"./Docker-Images"},"previous exercise")," to add several automated tools."),(0,i.kt)("p",null,"These include:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Code Linting"),(0,i.kt)("li",{parentName:"ol"},"Image Scanning"),(0,i.kt)("li",{parentName:"ol"},"Automated Dependency Updating"),(0,i.kt)("li",{parentName:"ol"},"IaC Scanning")),(0,i.kt)("p",null,'Leveraging on these tools allows Developers to detect and prevent defects in their codebase earlier in the Software Development Lifecycle (SDLC) more frequently. This is known as "Shift-Left Testing" in DevOps, and it fully embodies the "Test early and often" mantra typically seen in Agile organizations practicing iterative development.'),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"You should have completed all previous exercises:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"./DevOps"},"DevOps Setup")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"./CICD-PartI"},"Deploy Frontend to the Cloud")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"./Docker-Images"},"Docker Images")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"./InfrastructureAsCode"},"Infrastructure-as-Code"))),(0,i.kt)("h2",{id:"enhancing-the-cicd-pipeline"},"Enhancing the CI/CD Pipeline"),(0,i.kt)("h3",{id:"linting"},"Linting"),(0,i.kt)("p",null,"Code linters are static code analysis tools commonly used to improve the quality of code."),(0,i.kt)("p",null,"Linters help to flag out:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Formatting and styling inconsistencies"),(0,i.kt)("li",{parentName:"ul"},"Non-adherence to coding standards and conventions"),(0,i.kt)("li",{parentName:"ul"},"Common logical bugs / errors")),(0,i.kt)("p",null,"Typically, different programming languages will have their own specialized linters specific to the syntax of the language. Modern linters will also allow developers to add custom rules."),(0,i.kt)("h4",{id:"stretch-goal-1"},"Stretch Goal 1"),(0,i.kt)("p",null,"Add a new job in ",(0,i.kt)("inlineCode",{parentName:"p"},".github/workflows/main.yml")," to automatically lint the codebase."),(0,i.kt)("p",null,"Requirements:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Flag out code quality issues in the frontend and backend source code"),(0,i.kt)("li",{parentName:"ol"},"(Optional) Lint other files in the repository such as the yaml files used to define your CI/CD pipeline")),(0,i.kt)("p",null,"You can consider using the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/github/super-linter"},"Super-Linter GitHub Action"),", which natively supports linting all languages in the codebase (ie. Javascript, Dockerfile, YAML)."),(0,i.kt)("p",null,"Upon successfully completing the exercise, the job will most likely fail as there are several linting errors in the codebase. You may consider following the recommendations to fix the errors."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/11332803/134580397-d7d0fb68-eedd-409e-a809-b78ce53473b3.png",alt:"Lint errors"})),(0,i.kt)("h3",{id:"image-scanning"},"Image Scanning"),(0,i.kt)("p",null,"In almost all projects small or large, you will likely depend on external libraries to develop your applications. You may take a look at the dependencies required by the frontend and backend in the respective ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," files."),(0,i.kt)("p",null,"Even the most widely used dependencies may contain vulnerabilities. Vulnerabilities in dependencies may expose your application to potential exploitation and affects its security posture. It is important to keep all dependencies up-to-date so that these security risks are mitigated."),(0,i.kt)("p",null,"However, it is tedious to perform these checks manually, especially for larger projects that utilise many external libraries. It is also difficult to be thorough, since the libraries may also depend on other libraries that could contain vulnerabilities."),(0,i.kt)("p",null,"This process of scanning your application for such vulnerabilities can be fully-automated with the help of a CI/CD pipeline and image scanning tools. When vulnerabilities are discovered and publicly disclosed, they are usually assigned a ",(0,i.kt)("a",{parentName:"p",href:"https://cve.mitre.org/"},"Common Vulnerabilities and Exposures glossary (CVE)")," entry with a unique ID. Whenever the pipeline runs, these automated tools reference known CVEs to detect vulnerable dependencies in your application and propose remediation measures."),(0,i.kt)("p",null,"Some tools may also include additional compliance checks to ensure that applications adhere to industry-recognized benchmarks or best practices, such as the ",(0,i.kt)("a",{parentName:"p",href:"https://www.cisecurity.org/benchmark/docker/"},"CIS Docker Benchmarks"),"."),(0,i.kt)("h4",{id:"stretch-goal-2"},"Stretch Goal 2"),(0,i.kt)("p",null,"Add a new job in ",(0,i.kt)("inlineCode",{parentName:"p"},".github/workflows/main.yml")," to automatically scan the frontend and backend images for vulnerabilities."),(0,i.kt)("p",null,"Requirements:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Flag out vulnerabilities found in the images"),(0,i.kt)("li",{parentName:"ul"},"Prevent the ",(0,i.kt)("inlineCode",{parentName:"li"},"Build-And-Push")," job from running if vulnerabilities are detected")),(0,i.kt)("p",null,"There are several open-source image scanning GitHub Actions available to accomplish this task. You may consider using the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Azure/container-scan"},"Container Scan GitHub Action")," which scans for vulnerable dependencies and checks for adherence to CIS Benchmarks."),(0,i.kt)("p",null,"Similar to Stretch Goal 1, the job will fail as there are several outdated dependencies in the codebase. You may consider following the recommendations to fix the errors."),(0,i.kt)("h3",{id:"automated-dependency-updating"},"Automated Dependency Updating"),(0,i.kt)("p",null,"In the previous task, image scanning tools were added to detect vulnerabilities in your codebase. However, this detection only happens when the pipeline is ran and should not be your only security mechanism relied upon. If no code changes are made for a long period of time, you will not be alerted of outdated / vulnerable dependencies automatically."),(0,i.kt)("p",null,"To complement image scanning tools, dependency auto-updating tools can be used. They can be used to:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Automatically check codebase for vulnerable dependencies periodically."),(0,i.kt)("li",{parentName:"ol"},"Automatically check the CI/CD pipeline for outdated dependencies periodically. The CI/CD pipeline also depends on open-source GitHub Actions, which receive updates frequently."),(0,i.kt)("li",{parentName:"ol"},"Suggest appropriate remediation actions by upgrading outdated dependencies automatically (either as direct commits or Pull Requests).")),(0,i.kt)("h4",{id:"stretch-goal-3"},"Stretch Goal 3"),(0,i.kt)("p",null,"Add automated dependency updating to your repository. You may consider using ",(0,i.kt)("a",{parentName:"p",href:"https://dependabot.com/"},"dependabot"),"."),(0,i.kt)("p",null,"Requirements:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Check for outdated GitHub Actions used in the CI/CD pipeline"),(0,i.kt)("li",{parentName:"ol"},"Check for outdated Node.js dependencies in the frontend and backend code"),(0,i.kt)("li",{parentName:"ol"},"Automated daily checks"),(0,i.kt)("li",{parentName:"ol"},"Automated suggested fixes via Pull Requests")),(0,i.kt)("p",null,"When successfully created, pull requests should be automatically created. For example:",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/11332803/134580206-81266c42-96e6-4462-96f0-598e94b1e5f3.png",alt:"Automated PRs with dependency updates"})),(0,i.kt)("h3",{id:"infrastructure-as-code-iac-scanning"},"Infrastructure-as-Code (IaC) Scanning"),(0,i.kt)("p",null,"The IaC code defines your cloud infrastructure. Because you are now fully in charge of your cloud resources, you too are responsible for the security of the infrastructure. While we can always rely on a kind colleague to do a peer review prior to pushing code onto the cloud, a better way might be to include automated security scannings in your pipeline that will fail the deployment if it does not comply to security best practices."),(0,i.kt)("h4",{id:"stretch-goal-4"},"Stretch Goal 4"),(0,i.kt)("p",null,"Add an automated vulnerability scanner for Terraform within the pipeline that will fail the pipeline if vulnerabilities are detected."),(0,i.kt)("p",null,"Requirements:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Add TFSec job to ",(0,i.kt)("inlineCode",{parentName:"li"},".github/workflows/deploy-to-aws.yml")),(0,i.kt)("li",{parentName:"ol"},"Fail the pipeline if vulnerabilities are detected"),(0,i.kt)("li",{parentName:"ol"},"Resolve or accept the risks (if any) identified by TFSec")),(0,i.kt)("h3",{id:"further-stretch-goals"},"Further Stretch Goals"),(0,i.kt)("p",null,"In addition to the above stretch goals, you may consider working on these challenges in your own time for learning:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Add unit tests to the frontend and backend code and automate testing in the CI/CD pipeline"),(0,i.kt)("li",{parentName:"ul"},"Further reduce the size of the frontend and backend images"),(0,i.kt)("li",{parentName:"ul"},"Modify the pipeline to only build and push images when there are code changes in the frontend or backend"),(0,i.kt)("li",{parentName:"ul"},"Refactor the pipeline to use the ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/docker/build-push-action"},"build-push-action GitHub Action")),(0,i.kt)("li",{parentName:"ul"},"Implement caching",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/docker/build-push-action/blob/master/docs/advanced/cache.md"},"https://github.com/docker/build-push-action/blob/master/docs/advanced/cache.md")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://evilmartians.com/chronicles/build-images-on-github-actions-with-docker-layer-caching"},"https://evilmartians.com/chronicles/build-images-on-github-actions-with-docker-layer-caching")))),(0,i.kt)("li",{parentName:"ul"},"Deploy other cloud services via IaC"),(0,i.kt)("li",{parentName:"ul"},"Implement branching strategies with your CI/CD pipeline - e.g. deploying to cloud only on main branch")),(0,i.kt)("hr",null),(0,i.kt)("p",null,"Congratulations on completing the stretch goals! Do remember to move on to the final exercise to clean up your cloud environment."),(0,i.kt)("hr",null))}d.isMDXComponent=!0}}]);