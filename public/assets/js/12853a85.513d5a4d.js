"use strict";(self.webpackChunkgds_bootcamp=self.webpackChunkgds_bootcamp||[]).push([[7128],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),d=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},s=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),s=d(n),h=r,f=s["".concat(l,".").concat(h)]||s[h]||u[h]||a;return n?o.createElement(f,i(i({ref:t},p),{},{components:n})):o.createElement(f,i({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=s;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var d=2;d<a;d++)i[d]=n[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}s.displayName="MDXCreateElement"},4027:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var o=n(7462),r=(n(7294),n(3905));const a={},i="3.3 Deploying the Backend with IaC",c={unversionedId:"ci-cd/Deploy-Backend-IaC",id:"ci-cd/Deploy-Backend-IaC",title:"3.3 Deploying the Backend with IaC",description:"Introduction",source:"@site/docs/ci-cd/33-Deploy-Backend-IaC.md",sourceDirName:"ci-cd",slug:"/ci-cd/Deploy-Backend-IaC",permalink:"/docs/ci-cd/Deploy-Backend-IaC",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ci-cd/33-Deploy-Backend-IaC.md",tags:[],version:"current",sidebarPosition:33,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"3.2 Deploying the Frontend with IaC",permalink:"/docs/ci-cd/Deploy-Frontend-IaC"},next:{title:"3.4 CI/CD Pipeline Enhancements",permalink:"/docs/ci-cd/CICD-Enhancements"}},l={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Everything on the Cloud",id:"everything-on-the-cloud",level:2},{value:"Deploying Your Backend",id:"deploying-your-backend",level:3},{value:"Background",id:"background",level:4},{value:"Instructions",id:"instructions",level:4},{value:"Definition of Done",id:"definition-of-done",level:4}],p={toc:d};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"33-deploying-the-backend-with-iac"},"3.3 Deploying the Backend with IaC"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In the previous exercise, we set up our CI/CD pipeline with our AWS credentials. Upon invoking the pipeline, a bunch of resources were deployed onto AWS."),(0,r.kt)("p",null,"You were able to access the frontend application that was deployed on an object store. However, the application was unable to connect to the backend component because the backend component does not exist on the cloud yet."),(0,r.kt)("p",null,"In this section, you will deploy the backend component that you created in the previous workshop onto the cloud. You will then configure the frontend application to connect to your backend component."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"everything-on-the-cloud"},"Everything on the Cloud"),(0,r.kt)("h3",{id:"deploying-your-backend"},"Deploying Your Backend"),(0,r.kt)("h4",{id:"background"},"Background"),(0,r.kt)("p",null,"A template backend is already deployed using ",(0,r.kt)("a",{parentName:"p",href:"../deployment/gds-backend.tf"},"gds-backend.tf"),'. In that backend, a container with the image "nginxdemos/hello:plain-text" is deployed, listening on the port 80.'),(0,r.kt)("p",null,'You may try to access that container using the output of step "Apply Deployment" in the pipeline. Look out for something like this:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'Outputs:\n\nbackend_url = "123.4.5.6"\nreact_url = "gds-react-bucket-jl49qjvn5qq.s3-website-ap-southeast-1.amazonaws.com"\n')),(0,r.kt)("p",null,"In this case, the backend is accessible with the address ",(0,r.kt)("inlineCode",{parentName:"p"},"http://123.4.5.6"),", with an output that looks similar to this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Server address: 172.17.0.2:80\nServer name: 48f2c7bd5473\nDate: 23/Sep/2021:05:32:55 +0000\nURI: /\nRequest ID: 8bef2d59d5fee61f59684923d659f02e\n")),(0,r.kt)("h4",{id:"instructions"},"Instructions"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Modify ",(0,r.kt)("a",{parentName:"li",href:"../deployment/gds-backend.tf"},"gds-backend.tf")," to have your containerised application deployed onto the EC2."),(0,r.kt)("li",{parentName:"ol"},"Modify ",(0,r.kt)("a",{parentName:"li",href:"../deployment/gds-frontend.tf"},"gds-frontend.tf")," to ensure that your frontend is pointed to your backend."),(0,r.kt)("li",{parentName:"ol"},"Modify ",(0,r.kt)("a",{parentName:"li",href:"../deployment/gds-networking.tf"},"gds-networking.tf")," to ensure that your backend is accessible from your IP address")),(0,r.kt)("h4",{id:"definition-of-done"},"Definition of Done"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"You should be able to access the backend application from your browser"),(0,r.kt)("li",{parentName:"ol"},"Your frontend application should be able to access your backend application")),(0,r.kt)("hr",null))}u.isMDXComponent=!0}}]);